<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>OSD Smooth Animation</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body, #map {
    height: 100%;
    margin: 0;
}
</style>
</head>

<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

// Create map
var map = L.map('map');

// Your exact bounds
var bounds = [
    [21.0447424, 38.3815844],
    [22.0170136, 38.7933956]
];

// Fit map
map.fitBounds(bounds);

// Base map
L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
).addTo(map);


// TOTAL frames
var totalFrames = 96;

// Store all frames here
var frames = [];

// Current frame index
var currentFrame = 0;


// STEP 1: preload all frames
for(let i = 1; i <= totalFrames; i++)
{
    let frame = L.imageOverlay(
        "/static/frames/OSD_" + i + ".png",
        bounds,
        {opacity: 0}
    );

    frame.addTo(map);

    frames.push(frame);
}


// STEP 2: show first frame
frames[0].setOpacity(1);


// STEP 3: smooth animation
setInterval(function()
{
    // hide current frame
    frames[currentFrame].setOpacity(0);

    // next frame
    currentFrame++;

    if(currentFrame >= totalFrames)
        currentFrame = 0;

    // show next frame instantly
    frames[currentFrame].setOpacity(1);

}, 100); // 100ms = smooth animation


</script>

</body>
</html>
